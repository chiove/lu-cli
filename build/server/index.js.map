{"version":3,"sources":["webpack:///./src/utils/get-initial-props.js","webpack:///./src/pages/index/options.js","webpack:///./src/pages/index/index.js"],"names":["_this","_isPop","_isMount","popStateCallback","SourceComponent","initialData","canClientFetch","this","match","location","res","window","props","history","action","staticContext","React","particles","number","value","density","enable","value_area","color","shape","type","stroke","width","polygon","nb_sides","opacity","random","anim","speed","opacity_min","sync","size","size_min","line_linked","distance","move","direction","straight","out_mode","bounce","attract","rotateX","rotateY","interactivity","detect_on","events","onhover","mode","onclick","resize","modes","grab","bubble","duration","repulse","push","particles_nb","remove","getInitialProps","useState","typing","setTyping","useEffect","addIndex","deleteIndex","arrayIndex","timer","skills","skillsArray","setTimeout","clearTimeout","flag","className","id","to","key","exact","path","item","component"],"mappings":"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","file":"index.js","sourcesContent":["// 高阶组件 用于提取重复逻辑\n\nimport React from 'react';\n\nlet _this = null;\nlet _isPop = false;\nlet _isMount = false;\nconst popStateCallback = () => {\n  if (_this && _this.getInitialProps) {\n    _isPop = true;\n    if (_isMount) {\n      _this.getInitialProps();\n    }\n  }\n};\n\nexport default SourceComponent => class HoComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      initialData: {},\n      canClientFetch: false,\n    };\n  }\n\n  // 用于服务端调用\n  static async getInitialProps(ctx) {\n    const res = SourceComponent.getInitialProps ? await SourceComponent.getInitialProps(ctx) : {};\n    return res;\n  }\n\n  // 用于封装处理\n  async getInitialProps() {\n    // ssr首次进入页面以及csr/ssr切换路由时才调用组件的getInitialProps方法\n    const {match, location} = this.props;\n    const res = SourceComponent.getInitialProps ? await SourceComponent.getInitialProps({match, location}) : {};\n    this.setState({\n      initialData: res,\n      canClientFetch: true,\n    });\n\n    // console.log('getInitialProps');\n    // let { tdk } = res.page;\n    // if (tdk) {\n    //     document.title = tdk.title;\n    // }\n  }\n\n  async componentDidMount() {\n    // 注册事件，用于在页面回退和前进的时候触发\n    _isMount = true;// 组件挂载完成\n    if (window.__USE_SERVER__) {\n      _this = this;\n      // 注册事件\n      window.addEventListener('popstate', popStateCallback);\n      if (_isPop) { // 如果前进或者后退 则需要异步获取数据\n        this.getInitialProps();\n      }\n    }\n\n    const canClientFetch = this.props.history && this.props.history.action === 'PUSH';\n    if (canClientFetch || !window.__USE_SERVER__) {\n      await this.getInitialProps();\n    }\n  }\n\n  componentWillUnmount() {\n    _isPop = false; // 重置为未触发\n    _isMount = false;// 重置为未挂载\n  }\n\n  render() {\n    const props = {\n      initialData: {},\n      ...this.props,\n    };\n\n\n    if (__SERVER__) {\n      // 服务端渲染\n      if (this.props.staticContext) props.initialData = this.props.staticContext.initialData || {};\n    } else {\n      // 客户端渲染\n      const {canClientFetch, initialData} = this.state;\n      if (canClientFetch) { // 需要异步请求数据\n        props.initialData = initialData || {};\n      } else {\n        props.initialData = window.__INITIAL_DATA__;\n        window.__INITIAL_DATA__ = null;\n      }\n    }\n    return <SourceComponent {...props} />;\n  }\n};\n","export default {\n  particles: {\n    number: {\n      value: 80,\n      density: {\n        enable: true,\n        value_area: 800,\n      },\n    },\n    color: {\n      value: ['#2EB67D', '#ECB22E', '#E01E5B', '#36C5F0'],\n    },\n    shape: {\n      type: ['circle'],\n      stroke: {\n        width: 0,\n        color: '#fff',\n      },\n      polygon: {\n        nb_sides: 5,\n      },\n    },\n    opacity: {\n      value: 1,\n      random: false,\n      anim: {\n        enable: false,\n        speed: 1,\n        opacity_min: 0.1,\n        sync: false,\n      },\n    },\n    size: {\n      value: 8,\n      random: true,\n      anim: {\n        enable: false,\n        speed: 10,\n        size_min: 10,\n        sync: false,\n      },\n    },\n    line_linked: {\n      enable: true,\n      distance: 150,\n      color: '#808080',\n      opacity: 0.4,\n      width: 1,\n    },\n    move: {\n      enable: true,\n      speed: 5,\n      direction: 'none',\n      random: false,\n      straight: false,\n      out_mode: 'out',\n      bounce: false,\n      attract: {\n        enable: false,\n        rotateX: 600,\n        rotateY: 1200,\n      },\n    },\n  },\n  interactivity: {\n    detect_on: 'canvas',\n    events: {\n      onhover: {\n        enable: true,\n        mode: 'grab',\n      },\n      onclick: {\n        enable: true,\n        mode: 'push',\n      },\n      resize: true,\n    },\n    modes: {\n      grab: {\n        distance: 140,\n        line_linked: {\n          opacity: 1,\n        },\n      },\n      bubble: {\n        distance: 400,\n        size: 40,\n        duration: 2,\n        opacity: 8,\n        speed: 3,\n      },\n      repulse: {\n        distance: 200,\n        duration: 0.4,\n      },\n      push: {\n        particles_nb: 4,\n      },\n      remove: {\n        particles_nb: 2,\n      },\n    },\n  },\n};\n","import React, {useState, useRef, useEffect, useCallback} from 'react';\nimport {Link, StaticRouter, Route, Switch} from 'react-router-dom';\nimport {\n  FileTextOutlined,\n  EditOutlined,\n  ContactsOutlined,\n} from '@ant-design/icons';\nimport axios from 'axios';\nimport {Button} from 'antd';\nimport getInitialProps from 'src/utils/get-initial-props';\nimport options from './options';\nimport './style.less';\n\nexport default getInitialProps((props) => {\n  const [typing, setTyping] = useState('');\n  useEffect(() => {\n    window.particlesJS('home-canvas', options);\n  }, []);\n\n  useEffect(() => {\n    let addIndex = 0;\n    let deleteIndex = -1;\n    let arrayIndex = 0;\n    let timer = null;\n    const skills = () => {\n      const skillsArray = ['html', 'js', 'css', 'react', 'vue', 'webpack', 'node', 'koa', 'ssr'];\n      if (addIndex <= skillsArray[arrayIndex].length) {\n        setTyping(skillsArray[arrayIndex].slice(0, addIndex++));\n        if (addIndex > skillsArray[arrayIndex].length) {\n          timer = setTimeout(skills, 1500);\n        } else {\n          timer = setTimeout(skills, 80);\n        }\n      } else {\n        clearTimeout(timer);\n        if (deleteIndex > -skillsArray[arrayIndex].length) {\n          setTyping(skillsArray[arrayIndex].slice(0, deleteIndex--));\n          timer = setTimeout(skills, 80);\n        } else {\n          clearTimeout(timer);\n          setTyping('');\n          addIndex = 0;\n          if (arrayIndex < skillsArray.length - 1) {\n            arrayIndex += 1;\n            deleteIndex = -1;\n            timer = setTimeout(skills, 80);\n          } else {\n            arrayIndex = 0;\n            timer = setTimeout(skills, 80);\n          }\n        }\n      }\n    };\n    skills();\n    return () => { clearTimeout(timer); };\n  }, []);\n\n  const flag = props.location.pathname === '/home';\n  return (\n    <div className=\"home\">\n      <div id=\"home-canvas\" />\n      <div className=\"home-center\">\n        <div className=\"home-sidebar\">\n          <div className=\"home-sidebar-item\">\n            <Link to=\"/home\">\n              <div className=\"home-sidebar-logo-container\">\n                <div className=\"home-sidebar-logo\" />\n              </div>\n            </Link>\n          </div>\n          <div className=\"home-sidebar-item\">\n            <Link to=\"/home/a\">\n              <FileTextOutlined className=\"home-sidebar-icon\"/>\n              <div className=\"home-sidebar-name\">简历</div>\n            </Link>\n          </div>\n          <div className=\"home-sidebar-item\">\n            <Link to=\"/home/login1\">\n              <EditOutlined className=\"home-sidebar-icon\"/>\n              <div className=\"home-sidebar-name\">博客</div>\n            </Link>\n          </div>\n          <div className=\"home-sidebar-item\">\n            <ContactsOutlined className=\"home-sidebar-icon\"/>\n            <div className=\"home-sidebar-name\">联系</div>\n          </div>\n        </div>\n        <div className=\"home-content\">\n          {\n           !flag ? <Switch>\n             {\n             props.routes.map((item, key) => (<Route\n               key={key}\n               exact\n               path={item.path}\n               component={item.component}\n             />))\n         }\n           </Switch> : (\n             <div>\n               <div className=\"home-header\">\n                 <div className=\"home-header-img\" />\n               </div>\n               <div className=\"home-author\">\n                 陆朝维\n               </div>\n               <div className=\"home-typing-container\">\n                 <div className=\"home-typing-name\">会的技能</div>\n                 <div className=\"home-typing-content\">\n                   <span className=\"home-typing-skill\">{typing}</span>\n                   <span className=\"home-typing-input\">|</span>\n                 </div>\n               </div>\n             </div>\n           )\n         }\n        </div>\n      </div>\n    </div>\n  );\n});\n"],"sourceRoot":""}